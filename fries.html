<!DOCTYPE html>
<html>
<head>
    <title>Voices77</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Geologica:wght@100..900&display=swap" rel="stylesheet">
</head>
<body>
<a href="index.html">
<button class="back">Назад</button>
</a>
<center>
<img src="https://em-content.zobj.net/source/telegram/386/french-fries_1f35f.webp" width="50%">
<h1 style="font-family: Geologica;">French-Fries<h1>
<p style="font-family: Geologica; font-size: 16px;">1.79$</p>

<form id="orderForm"> 
  <input id="Телефон" placeholder=" Телефон" required><br>
  <input id="Адрес" placeholder=" Адрес" required><br>
  <input id="Квартира" placeholder=" Квартира" required><br>
  <input id="Этаж" placeholder=" Этаж" required><br>
  <input id="Домофон" placeholder=" Домофон" required><br>
  <input id="Примечания" placeholder=" Примечения" required>
<a href="index.html">
  <button type="submit" id="send" class="add">Add</button>
</a>
</form>

</center>

<style>
body {
    background-color: white;
}
input {
    background-color: rgb(221, 221, 221);
    border-radius: 25px;
    width: 88%;
    height: 10vw;
    border: none;
    color: black;
    font-family: Geologica;
    margin-top: 2vw;
}
.add {
    background-color: rgb(231, 148, 54);
    width: 100%;
    height: 12vw;
    color: white;
    border: none;
    border-radius: 15px;
    font-family: Geologica;
    margin-top: 15vw;
}
.back {
    background-color: white;
    color: black;
    font-family: Geologica;
    border: none;
    width: 20%;
    height: 5vw;
    font-size: 20px;
}
</style>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    import { getDatabase, ref, set, get, child } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";

    const firebaseConfig = {
        apiKey: "AIzaSyAtS-g3wpuwz_DQF8XiDfDsT5xK6pFlqo4",
        authDomain: "magazine-d1bc8.firebaseapp.com",
        databaseURL: "https://magazine-d1bc8-default-rtdb.firebaseio.com",
        projectId: "magazine-d1bc8",
        storageBucket: "magazine-d1bc8.firebasestorage.app",
        messagingSenderId: "521332004559",
        appId: "1:521332004559:web:64febc7b9abb30083fc9ba",
        measurementId: "G-T4R41TRZ9P"
      };

      const app = initializeApp(firebaseConfig);
      const db = getDatabase(app);
      const orderForm = document.getElementById("orderForm");

      orderForm.addEventListener('submit', (e) => {
        e.preventDefault(); // Предотвращаем стандартную отправку формы

        const Телефон = document.getElementById("Телефон").value;
        const Адрес = document.getElementById("Адрес").value;
        const Квартира = document.getElementById("Квартира").value;
        const Этаж = document.getElementById("Этаж").value;
        const Домофон = document.getElementById("Домофон").value;
        const Примечания = document.getElementById("Примечания").value;

        // Проверка на пустые значения
        if (Телефон === "" || Адрес === "" || Квартира === "" || Этаж === "" || Домофон === "" || Примечания === "") {
          alert("Пожалуйста, заполните все поля.");
          return; // Прекращаем выполнение функции
        }

        set(ref(db, 'french-fries/' + generateUUID()), {
          Телефон: Телефон,
          Адрес: Адрес,
          Квартира: Квартира,
          Этаж: Этаж,
          Домофон: Домофон,
          Примечания: Примечания
        });
        alert("Заказ создан!");

        orderForm.reset(); // Очищаем форму
      });

      // Функция для генерации UUID
      function generateUUID() {
        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
          const r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
          return v.toString(16);
        });
      }
</script>
</body>
</html>
